# C53. CSS åŠ¨ç”»

## 3.1. â­ CSS åŠ¨ç”»åŸºç¡€ {#31-animation-basics}

> åŠ¨ç”»æ˜¯ç°ä»£ UI çš„é‡è¦ç‰¹å¾ï¼Œä¹Ÿæ˜¯ CSS çªç ´â€œé™æ€â€çš„å±€é™ï¼Œå¼€å‘åŠ¨æ€çš„æ— é™æ½œèƒ½çš„é‡è¦ä¸€æ­¥ã€‚

### 3.1.1 @keyframeså®šä¹‰åŠ¨ç”»åºåˆ—

é€šè¿‡ `@keyframes` è§„åˆ™å®šä¹‰åŠ¨ç”»çš„å…³é”®å¸§ï¼Œæ§åˆ¶å…ƒç´ åœ¨ä¸åŒæ—¶é—´ç‚¹çš„æ ·å¼å˜åŒ–ã€‚

**æ ¸å¿ƒç‰¹ç‚¹**ï¼š

- åŠ¨ç”»åç§°å”¯ä¸€ï¼ˆå¦‚ `blink`ï¼‰
- ç”¨ `0%~100%` æˆ– `from/to` å®šä¹‰åŠ¨ç”»è¿‡ç¨‹
- å¯æ·»åŠ ä¸­é—´çŠ¶æ€ï¼ˆå¦‚ `50%`ï¼‰

:::code-group
```css
/* é—ªçƒåŠ¨ç”»ç¤ºä¾‹ */
@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

.blink-element {
  animation: blink 1s infinite;
}
```
```html
<div class="blink-element">é—ªçƒæ–‡å­—</div>
```
:::

### 3.1.2 åŠ¨ç”»å±æ€§

**æ ¸å¿ƒå±æ€§é€ŸæŸ¥è¡¨**ï¼š

| å±æ€§åç§°                    | ä½œç”¨             | å¿«é€Ÿè®°å¿†å£è¯€                 |
| --------------------------- | ---------------- | ---------------------------- |
| `animation-duration`        | åŠ¨ç”»æŒç»­æ—¶é—´     | æ—¶é•¿ï¼ˆå¦‚`2s`ï¼‰               |
| `animation-delay`           | åŠ¨ç”»å»¶è¿Ÿå¯åŠ¨æ—¶é—´ | ç­‰ç­‰å†å¼€å§‹ï¼ˆå¦‚`0.5s`ï¼‰       |
| `animation-fill-mode`       | ç»“æŸåæ ·å¼ä¿ç•™   | è®°ä½æœ€åçš„æ ·å­ï¼ˆ`forwards`ï¼‰ |
| `animation-iteration-count` | åŠ¨ç”»é‡å¤æ¬¡æ•°     | æ— é™å¾ªç¯ï¼ˆ`infinite`ï¼‰       |

ä»¥ä¸Šå†…å®¹å…¨éƒ¨å¯ä»¥â€œå¡è¿›â€`animation` å±æ€§ä¸­ä½œä¸ºç®€å†™ï¼Œé¡ºåºåªéœ€æ³¨æ„ç¬¬ä¸€ä¸ªæ—¶é—´å€¼ä½œä¸º `<animation-duration>`ï¼Œè€Œç¬¬äºŒä¸ªæ—¶é—´å€¼ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ä½œä¸º `<animation-delay>`ã€‚

::: info
å› ç¯‡å¹…æœ‰é™ï¼Œä¸å¼•å…¥è¿‡å¤šçš„å±æ€§åç§°ã€‚å¯å‚è€ƒï¼š<https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_animations/Using_CSS_animations>ã€‚
:::

### 3.1.3 å¸¸è§é—®é¢˜

åŠ¨ç”»ä¸æ‰§è¡Œï¼Ÿä¸‰æ­¥æ’æŸ¥æ³•ï¼š

1. æ˜¯å¦å†™äº†`animation-duration`ï¼Ÿ
2. `@keyframes`åç§°å’Œ`animation-name`æ˜¯å¦ä¸€è‡´ï¼Ÿ
3. å…ƒç´ æ˜¯å¦è¢«å…¶ä»–æ ·å¼è¦†ç›–ï¼Ÿ

## 3.2. ğŸŒŸ CSS åŠ¨ç”»å®ç°ç¤ºä¾‹

> CSS åŠ¨ç”»å®ç°æœ‰è®¸å¤šæŠ€å·§ã€â€œå®šå¼â€ã€‚å…ˆé˜…è¯»è¿™äº›åŸºæœ¬çš„ä»£ç ï¼Œç„¶åä»ä¸­å­¦ä¹  CSS åŠ¨ç”»çš„åŸºæœ¬ç”¨æ³•ï¼Œåˆ›é€ è‡ªå·±çš„åŠ¨ç”»ã€‚

### 3.2.1 æ—‹è½¬+ç¼©æ”¾åŠ¨ç”»

:::code-group
```css {1-5,12}
@keyframes spinScale {
  0% { transform: rotate(0deg) scale(1); }
  50% { transform: rotate(180deg) scale(1.2); }
  100% { transform: rotate(360deg) scale(1); }
}

.spinner {
  width: 100px;
  height: 100px;
  margin: 100px;
  background: #4CAF50;
  animation: spinScale 2s infinite ease-in-out;
}
```
```html
<div class="spinner"></div>
```
:::

### 3.2.2 æŒ‰é’®æ‚¬åœåŠ¨ç”»

:::code-group

```css
.button {
  padding: 12px 24px;
  background: #2196F3;
  transition: all 0.3s ease;
}

.button:hover {
  animation: pulse 0.5s ease-in-out;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}
```
```html
<button class="button">ç‚¹å‡»æˆ‘</button>
```
:::


### 3.2.3 æ— é™åŠ è½½åŠ¨ç”»

:::code-group
```css
.loader {
  border: 4px solid #f3f3f3;
  border-top: 4px solid #3498DB;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
```
```html
<div class="loader"></div>
```
:::

## 3.3 ï¼ˆæ‹“å±•ï¼‰gasp.js åŠ¨ç”»é›†æˆ

> CSS åŠ¨ç”»æ¯•ç«Ÿå…·æœ‰å±€é™æ€§å’Œè¾ƒé«˜çš„å…¼å®¹æ€§è¦æ±‚ã€‚çœŸæ­£çš„â€œåŠ¨æ€è¯­è¨€â€â€”â€”JavaScriptï¼Œæä¾›äº†æ›´ä¸°å¯Œçš„åŠ¨ç”»åŠŸèƒ½ã€‚

**GSAP è½®æ’­å›¾å®æˆ˜**ï¼š

```html
<div class="carousel">
  <div class="slide" style="background: url(img1.jpg)">Slide 1</div>
  <div class="slide" style="background: url(img2.jpg)">Slide 2</div>
  <div class="slide" style="background: url(img3.jpg)">Slide 3</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/gsap.min.js"></script>

<script>
const slides = document.querySelectorAll('.slide');
let currentIndex = 0;

function nextSlide() {
  gsap.to(slides[currentIndex], { duration: 0.5, x: '-100%' });
  currentIndex = (currentIndex + 1) % slides.length;
  gsap.fromTo(slides[currentIndex], { x: '100%' }, { duration: 0.5, x: '0%' });
}

setInterval(nextSlide, 3000);
</script>
```

## çŸ¥è¯†å›é¡¾

1. **@keyframes åŠ¨ç”»åºåˆ—**
   - é€šè¿‡`@keyframes`å®šä¹‰åŠ¨ç”»å…³é”®å¸§ï¼Œæ§åˆ¶æ ·å¼åœ¨æ—¶é—´è½´ä¸Šçš„å˜åŒ–
   - å…³é”®å¸§åç§°éœ€å”¯ä¸€ï¼Œç”¨`0%~100%`æˆ–`from/to`å®šä¹‰åŠ¨ç”»è¿‡ç¨‹
   - å¯æ·»åŠ ä¸­é—´çŠ¶æ€ï¼ˆå¦‚`50%`ï¼‰å®ç°å¤æ‚åŠ¨ç”»æ•ˆæœ

2. **æ ¸å¿ƒåŠ¨ç”»å±æ€§**
   | å±æ€§åç§° | ä½œç”¨ | å¿«é€Ÿè®°å¿† |
   |---------|------|----------|
   | `animation-duration` | åŠ¨ç”»æŒç»­æ—¶é—´ | å¿…é¡»è®¾ç½®ï¼Œå¦åˆ™ä¸æ‰§è¡Œ |
   | `animation-delay` | å»¶è¿Ÿå¯åŠ¨æ—¶é—´ | é»˜è®¤0 |
   | `animation-fill-mode` | ç»“æŸåæ ·å¼ä¿ç•™ | `forwards`ä¿æŒæœ€ç»ˆçŠ¶æ€ |
   | `animation-iteration-count` | é‡å¤æ¬¡æ•° | `infinite`æ— é™å¾ªç¯ |

3. **åŠ¨ç”»æ‰§è¡Œä¸‰è¦ç´ **
   ```css
   .element {
     animation: åç§° æŒç»­æ—¶é—´ é€Ÿåº¦æ›²çº¿ å»¶è¿Ÿ æ¬¡æ•° å¡«å……æ¨¡å¼;
   }
   ```
   - ç®€å†™æ—¶å¿…é¡»åŒ…å«`animation-duration`ï¼Œ`animation-delay`å¯é€‰

4. **æ€§èƒ½ä¼˜åŒ–æŠ€å·§**
   - ä¼˜å…ˆä½¿ç”¨`transform`å’Œ`opacity`å±æ€§å®ç°åŠ¨ç”»ï¼ˆGPUåŠ é€Ÿï¼‰
   - é¿å…åœ¨åŠ¨ç”»ä¸­è§¦å‘é‡æ’çš„å±æ€§ï¼ˆå¦‚`width/height`ï¼‰
   - ä½¿ç”¨`will-change`æç¤ºæµè§ˆå™¨æå‰ä¼˜åŒ–

5. **å¸¸è§é—®é¢˜æ’æŸ¥**
   - åŠ¨ç”»æœªæ‰§è¡Œï¼Ÿæ£€æŸ¥ï¼š
     1. æ˜¯å¦è®¾ç½®`animation-duration`
     2. `@keyframes`åç§°ä¸`animation-name`æ˜¯å¦ä¸€è‡´
     3. æ˜¯å¦è¢«`display: none`ç­‰æ ·å¼è¦†ç›–

## è¯¾åç»ƒä¹ 

1. è¡¥å…¨ `@keyframes` åŠ¨ç”»å®šä¹‰ï¼š
   ```css
   .slide-element {
     animation: slideIn 1s ease-out forwards;
   }
   ```

2. è¡¥å…¨æ¶ˆå¤±åŠ¨ç”»çš„ `@keyframes` è§„åˆ™ï¼š
   ```css
   .fade {
     animation: fadeOut 1s forwards;
   }
   ```

3. è®¾è®¡ä¸€ä¸ªã€Œæ–‡å­—æ‰“å­—æœºã€æ•ˆæœï¼š
   - é€å­—æ˜¾ç¤ºæ–‡å­—
   - ä½¿ç”¨`@keyframes`
   - æ·»åŠ æ‰“å­—æœºå…‰æ ‡é—ªçƒ

::: details å‚è€ƒç­”æ¡ˆ

1. å‚è€ƒï¼š
   ```css
   @keyframes slideIn {
     0% { transform: translateX(-100%); }
     100% { transform: translateX(0); }
   }
   ```

2. å‚è€ƒï¼š
   ```css
   @keyframes fadeOut {
     0% { opacity: 1; }
     100% { opacity: 0; }
   }
   ```

3. æ–‡å­—æ‰“å­—æœºæ•ˆæœå®ç°ï¼š
   ```css
   /* æ‰“å­—æœºæ•ˆæœæ ¸å¿ƒæ ·å¼ */
   @keyframes typing {
     0% { width: 0; }
     100% { width: 100%; }
   }

   @keyframes blink {
     0% { opacity: 0; }
     50% { opacity: 1; }
     100% { opacity: 0; }
   }

   .typewriter {
     white-space: nowrap;
     overflow: hidden;
     border-right: 2px solid #000;
     width: fit-content;
     animation:
       typing 2s steps(20, end),
       blink 0.5s infinite;
   }

   /* å…‰æ ‡é—ªçƒä¼˜åŒ– */
   .typewriter::after {
     content: '';
     animation: blink 0.7s infinite;
   }
   ```

   ```html
   <div class="typewriter">Hello World!</div>
   ```

:::
