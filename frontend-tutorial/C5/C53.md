# C53. CSS åŠ¨ç”»

## 3.1. â­ CSS åŠ¨ç”»åŸºç¡€ {#31-animation-basics}

### 3.1.1. â­ `@keyframes` å®šä¹‰åŠ¨ç”»åºåˆ—

é€šè¿‡ `@keyframes` è§„åˆ™å®šä¹‰åŠ¨ç”»çš„å…³é”®å¸§ï¼Œæ§åˆ¶å…ƒç´ åœ¨ä¸åŒæ—¶é—´ç‚¹çš„æ ·å¼å˜åŒ–ã€‚

**æ ¸å¿ƒç‰¹ç‚¹**ï¼š

- **å”¯ä¸€æ€§**ï¼šåŠ¨ç”»åç§°éœ€å”¯ä¸€ä¸”ä¸ `animation-name` å…³è”ã€‚
- **ç™¾åˆ†æ¯”æ§åˆ¶**ï¼š0%~100% å®šä¹‰åŠ¨ç”»è¿›ç¨‹ï¼Œå¯è‡ªå®šä¹‰ä¸­é—´çŠ¶æ€ã€‚
- **ç®€å†™è¯­æ³•**ï¼š`from`ï¼ˆ0%ï¼‰å’Œ `to`ï¼ˆ100%ï¼‰ç®€åŒ–ä¸¤ç«¯å®šä¹‰ã€‚

```css
/* é—ªçƒåŠ¨ç”»ç¤ºä¾‹ */
@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}
```

### 3.1.2. `animation` å±æ€§åº”ç”¨åŠ¨ç”»

**å±æ€§è¯¦è§£**ï¼š

| å±æ€§                        | ä½œç”¨è¯´æ˜         | å…¸å‹å€¼ç¤ºä¾‹                                           |
| --------------------------- | ---------------- | ---------------------------------------------------- |
| `animation-name`            | å…³é”®å¸§åç§°       | `blink`, `spin`                                      |
| `animation-duration`        | åŠ¨ç”»æŒç»­æ—¶é—´     | `2s`, `1000ms`, `.3s`                                |
| `animation-timing-function` | é€Ÿåº¦æ›²çº¿         | `ease-in-out`, `linear`, `cubic-bezier(0.4,0,0.2,1)` |
| `animation-delay`           | åŠ¨ç”»å»¶è¿Ÿå¯åŠ¨æ—¶é—´ | `1s`, `0ms`                                          |
| `animation-iteration-count` | åŠ¨ç”»å¾ªç¯æ¬¡æ•°     | `3`, `infinite`                                      |
| `animation-direction`       | æ’­æ”¾æ–¹å‘         | `reverse`, `alternate`, `alternate-reverse`          |
| `animation-fill-mode`       | åŠ¨ç”»ç»“æŸåçš„çŠ¶æ€ | `forwards`, `both`, `none`                           |
| `animation-play-state`      | æš‚åœ/ç»§ç»­çŠ¶æ€    | `paused`, `running`                                  |

### 3.1.3. å¸¸è§é—®é¢˜ä¸æœ€ä½³å®è·µ

1. **åŠ¨ç”»ä¸ç”Ÿæ•ˆçš„æ’æŸ¥**ï¼š
   - ç¡®ä¿ `animation-duration` é `0`ã€‚
   - æ£€æŸ¥ `@keyframes` åç§°ä¸ `animation-name` æ˜¯å¦åŒ¹é…ã€‚
2. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - å¯¹ `transform` å’Œ `opacity` å±æ€§åŠ¨ç”»ä¼˜å…ˆï¼Œå› å…¶ç›´æ¥ä½œç”¨äºåˆæˆå±‚ã€‚
   - é¿å…è¿‡åº¦ä½¿ç”¨ `position: absolute` å…ƒç´ çš„åŠ¨ç”»ã€‚
3. **`animation-fill-mode` åº”ç”¨åœºæ™¯**ï¼š
   - `forwards`ï¼šåŠ¨ç”»ç»“æŸåä¿æŒæœ€ç»ˆçŠ¶æ€ï¼ˆå¦‚æŒ‰é’®æ‚¬åœæ•ˆæœï¼‰ã€‚
   - `both`ï¼šç»“åˆæ­£å‘å’Œåå‘å¡«å……ï¼ˆå¦‚æ— é™å¾ªç¯åŠ¨ç”»çš„å¹³æ»‘è¿‡æ¸¡ï¼‰ã€‚

## 3.2. ğŸŒŸ CSS åŠ¨ç”»å®ç°ç¤ºä¾‹

### 3.2.1. å¤åˆåŠ¨ç”»ï¼šæ—‹è½¬+ç¼©æ”¾

```css
/* å®šä¹‰å…³é”®å¸§ */
@keyframes spinScale {
  0% {
    transform: rotate(0deg) scale(1);
  }
  50% {
    transform: rotate(180deg) scale(1.2);
  }
  100% {
    transform: rotate(360deg) scale(1);
  }
}

/* åº”ç”¨åŠ¨ç”» */
.spinner {
  width: 100px;
  height: 100px;
  background: #4CAF50;
  animation: spinScale 2s infinite ease-in-out;
}
```

### 3.2.2. æŒ‰é’®æ‚¬åœåŠ¨ç”»

```css
.button {
  padding: 12px 24px;
  background: #2196F3;
  transition: all 0.3s ease;
}

.button:hover {
  animation: pulse 0.5s ease-in-out;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}
```

### 3.2.3. æ— é™å¾ªç¯çš„åŠ è½½åŠ¨ç”»

```css
.loader {
  border: 4px solid #f3f3f3; /* èƒŒæ™¯åœˆ */
  border-top: 4px solid #3498DB;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: spin 2s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
```

## 3.3. ğŸš€ gsap.js åŠ¨ç”»é›†æˆ

### 3.3.1. æ ¸å¿ƒåŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½         | CSSåŠ¨ç”»                        | gsap.js                      |
| ------------ | ------------------------------ | ---------------------------- |
| **é€Ÿåº¦æ›²çº¿** | é¢„å®šä¹‰å‡½æ•°ï¼ˆå¦‚ `ease-in-out`ï¼‰ | è‡ªå®šä¹‰è´å¡å°”æ›²çº¿æˆ–é¢„è®¾å‡½æ•°   |
| **å¤æ‚åº¦**   | é€‚åˆç®€å•åŠ¨ç”»                   | é€‚åˆå¤æ‚/åŠ¨æ€äº¤äº’            |
| **æ€§èƒ½**     | æµè§ˆå™¨åŸç”Ÿä¼˜åŒ–                 | éœ€æ³¨æ„å¤§é‡åŠ¨ç”»å¯èƒ½çš„æ€§èƒ½å¼€é”€ |
| **äº‹ä»¶é©±åŠ¨** | ä¾èµ– CSS é€‰æ‹©å™¨                | æ”¯æŒ JavaScript äº‹ä»¶ç»‘å®š     |

### 3.3.2. gsap.js é«˜çº§æŠ€å·§

#### 3.3.2.1 æ—¶é—´è½´æ§åˆ¶
```javascript
// åˆ›å»ºæ—¶é—´è½´
const timeline = gsap.timeline();

timeline
  .to(".box", { duration: 1, x: 200, ease: "power2.out" })
  .from(".text", { duration: 0.5, opacity: 0, y: -50 }, "-=0.3"); // åç§»æ—¶é—´
```

#### 3.3.2.2 ç¼“åŠ¨å‡½æ•°ç»„åˆ

```javascript
// è‡ªå®šä¹‰ç¼“åŠ¨æ›²çº¿
gsap.to(".element", {
  duration: 2,
  y: 200,
  ease: gsap.back.out(1.5) // æ·»åŠ å›å¼¹æ•ˆæœ
});
```

#### 3.3.2.3 åŠ¨æ€å‚æ•°

```javascript
// æ ¹æ®çª—å£å°ºå¯¸åŠ¨æ€è®¡ç®—åŠ¨ç”»è·ç¦»
const windowWidth = window.innerWidth;
gsap.to(".slider", {
  x: windowWidth * 0.5,
  duration: 1.5
});
```

## çŸ¥è¯†å›é¡¾

1. CSSåŠ¨ç”»æ ¸å¿ƒè¦ç´ 
   - **å®šä¹‰é˜¶æ®µ**ï¼šé€šè¿‡ `@keyframes` å®šä¹‰å…³é”®å¸§åºåˆ—ã€‚
   - **åº”ç”¨é˜¶æ®µ**ï¼šé€šè¿‡ `animation` å±æ€§é“¾å¼é…ç½®ï¼ˆå¦‚ `animation: spin 2s infinite ease-in-out;`ï¼‰ã€‚
   - **æ€§èƒ½ä¼˜åŒ–**ï¼šä¼˜å…ˆä½¿ç”¨ `transform` å’Œ `opacity` å±æ€§ã€‚

2. gsap.js ä¼˜åŠ¿åœºæ™¯
   - **å¤æ‚äº¤äº’**ï¼šå¦‚æ—¶é—´è½´ã€åŠ¨æ€å‚æ•°ã€äº‹ä»¶é©±åŠ¨åŠ¨ç”»ã€‚
   - **é«˜çº§ç¼“åŠ¨**ï¼šæä¾› `elastic`, `back`, `bounce` ç­‰é¢„è®¾æ•ˆæœã€‚
   - **ä»£ç å¤ç”¨**ï¼šé€šè¿‡ `gsap.utils` å®ç°åŠ¨ç”»å·¥å…·å‡½æ•°ã€‚

3. å¸¸è§å±æ€§ç»„åˆ
   - **åŸºç¡€å¾ªç¯åŠ¨ç”»**ï¼š
     `animation: spin 2s linear infinite;`
   - **æ‚¬åœè§¦å‘åŠ¨ç”»**ï¼š
     ```css
     &:hover {
       animation-play-state: running;
     }
     ```
   - **ç»„åˆ `forwards` ä¿æŒçŠ¶æ€**ï¼š
     `animation-fill-mode: forwards;`

## è¯¾åç»ƒä¹ 

1. ï¼ˆé€‰æ‹©ï¼‰ä»¥ä¸‹å“ªä¸ªå±æ€§å¯ä»¥æ§åˆ¶åŠ¨ç”»åœ¨ç»“æŸåçš„çŠ¶æ€ï¼Ÿ
   - A. `animation-timing-function`
   - B. `animation-direction`
   - C. `animation-fill-mode`
   - D. `animation-play-state`

2. ï¼ˆå¡«ç©ºï¼‰è¡¥å…¨ä»£ç å®ç°å…ƒç´ ä»å·¦æ»‘å…¥åŠ¨ç”»ï¼š
    ```css
    @keyframes slideIn {
      from { transform: translateX(-100%); }
      to { transform: translateX(0); }
    }

    .slide-element {
      animation: slideIn 1s ease-out ______; /* å¡«å†™å‚æ•° */
    }
    ```

3. ï¼ˆçº é”™ï¼‰æ‰¾å‡ºä»¥ä¸‹ä»£ç çš„é”™è¯¯å¹¶ä¿®æ­£ï¼š
    ```css
    @keyframes fadeOut {
      0% { opacity: 1; }
      100% { opacity: 0; }
    }

    .fade {
      animation: fadeOut 1s;
    }
    ```

4. é¡¹ç›®é¢˜ï¼šå®ç°è½®æ’­å›¾åŠ¨ç”»
    - ä½¿ç”¨ gsap.js å®ç°å›¾ç‰‡å·¦å³åˆ‡æ¢
    - æ·»åŠ ç¼“åŠ¨æ•ˆæœ
    - å¾ªç¯æ’­æ”¾

:::details å‚è€ƒç­”æ¡ˆ

1. **C** è§£æï¼š`animation-fill-mode` å®šä¹‰åŠ¨ç”»ç»“æŸåçš„æ ·å¼ä¿ç•™è§„åˆ™ã€‚
2. **`forwards`** è§£æï¼šä½¿ç”¨ `forwards` ä¿æŒåŠ¨ç”»ç»“æŸåçš„æœ€ç»ˆä½ç½®ã€‚
3. **é”™è¯¯**ï¼šæœªè®¾ç½® `animation-duration` æˆ– `animation` ç®€å†™æœªåŒ…å«æ—¶é•¿ã€‚

    **ä¿®æ­£**ï¼š
    ```css
    .fade {
      animation: fadeOut 1s forwards; /* æ·»åŠ æ—¶é•¿å’Œç»“æŸçŠ¶æ€ */
    }
    ```
4. é¡¹ç›®é¢˜
    ```javascript
    const slides = document.querySelectorAll('.slide');
    let currentIndex = 0;

    function nextSlide() {
      gsap.to(slides[currentIndex], { duration: 0.5, x: '-100%', ease: 'power2.out' });
      currentIndex = (currentIndex + 1) % slides.length;
      gsap.fromTo(slides[currentIndex], { x: '100%' }, { duration: 0.5, x: '0%', ease: 'power2.in' });
    }

    setInterval(nextSlide, 3000);
    ```

    ```html
    <div class="carousel">
      <div class="slide" style="background: url(img1.jpg)">Slide 1</div>
      <div class="slide" style="background: url(img2.jpg)">Slide 2</div>
      <div class="slide" style="background: url(img3.jpg)">Slide 3</div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/gsap.min.js"></script>
    ```
