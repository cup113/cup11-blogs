# C52. åª’ä½“æŸ¥è¯¢ å“åº”å¼å¼€å‘

## 2.1. @at-rules æ”¯æŒ CSS è§„åˆ™çš„é€‰æ‹©æ€§ä½¿ç”¨

> **@è§„åˆ™ï¼ˆ@-rulesï¼‰** æ˜¯ CSS ä¸­ç”¨äºæ§åˆ¶æ ·å¼ä½œç”¨èŒƒå›´æˆ–æ¡ä»¶çš„ç‰¹æ®ŠæŒ‡ä»¤ï¼Œå…¶ä¸­ `@media` æ˜¯å“åº”å¼å¼€å‘çš„æ ¸å¿ƒå·¥å…·ã€‚é€šè¿‡ `@media`ï¼Œå¯ä»¥ä¸ºä¸åŒè®¾å¤‡æˆ–å±å¹•æ¡ä»¶**é€‰æ‹©æ€§åº”ç”¨æ ·å¼**ã€‚

### ğŸŒŸ @media çš„åŸºæœ¬è¯­æ³•
```css
/* åŸºç¡€ç»“æ„ */
@media <åª’ä½“ç±»å‹> and (åª’ä½“ç‰¹æ€§) {
  /* åªåœ¨æ¡ä»¶æ»¡è¶³æ—¶ç”Ÿæ•ˆçš„æ ·å¼ */
}

/* ç¤ºä¾‹ï¼šå½“å±å¹•å®½åº¦ â‰¤ 600px æ—¶ï¼ŒèƒŒæ™¯å˜æµ…è“ */
@media screen and (max-width: 600px) {
  body {
    background-color: lightblue;
  }
}
```

### 2.1.1. åª’ä½“ç±»å‹ï¼ˆmedia typesï¼‰
| ç±»å‹       | è¯´æ˜                         |
|------------|------------------------------|
| `screen`   | ç”µè„‘ã€æ‰‹æœºç­‰å±å¹•è®¾å¤‡         |
| `print`    | æ‰“å°é¢„è§ˆæ ·å¼                 |
| `all`      | æ‰€æœ‰è®¾å¤‡ï¼ˆé»˜è®¤ï¼‰             |
| `tv`       | ç”µè§†ç­‰ä½åˆ†è¾¨ç‡è®¾å¤‡           |

### 2.1.2. åª’ä½“ç‰¹æ€§ï¼ˆmedia featuresï¼‰
| ç‰¹æ€§          | è¯´æ˜                          |
|---------------|-------------------------------|
| `min-width`   | è®¾å¤‡æœ€å°å®½åº¦ï¼ˆå¦‚ `min-width: 600px`ï¼‰ |
| `max-width`   | è®¾å¤‡æœ€å¤§å®½åº¦ï¼ˆå¦‚ `max-width: 768px`ï¼‰ |
| `orientation` | å±å¹•æ–¹å‘ï¼ˆ`portrait` ç«–å± / `landscape` æ¨ªå±ï¼‰ |
| `resolution`  | å±å¹•åˆ†è¾¨ç‡ï¼ˆå¦‚ `resolution: 2dppx`ï¼‰ |

::: warning
- å•ä½éœ€å¸¦å•ä½ï¼ˆ`px`ã€`vw` ç­‰ï¼‰ï¼Œæ— å•ä½é»˜è®¤ `px`ã€‚
- æ¡ä»¶ç»„åˆéœ€ç”¨ `and`ï¼ˆ`or`ã€`not` æ”¯æŒä½†è¾ƒå°‘ç”¨ï¼‰ã€‚
:::

## 2.2. é€šè¿‡ @media æ”¯æŒå“åº”å¼å¸ƒå±€

> **å“åº”å¼å¸ƒå±€**çš„æ ¸å¿ƒæ˜¯æ ¹æ®è®¾å¤‡ç‰¹æ€§åŠ¨æ€è°ƒæ•´é¡µé¢ç»“æ„ï¼Œåª’ä½“æŸ¥è¯¢æ˜¯å…¶å®ç°çš„å…³é”®ã€‚

### ğŸ› ï¸ ç¤ºä¾‹ï¼šè‡ªé€‚åº”å¯¼èˆªæ 
```css
/* é»˜è®¤å¸ƒå±€ï¼ˆå¤§å±å¹•ï¼‰ */
nav {
  display: flex;
  gap: 20px;
}

/* å½“å®½åº¦ â‰¤ 768px æ—¶ï¼Œå¯¼èˆªæŠ˜å ä¸ºåˆ— */
@media (max-width: 768px) {
  nav {
    flex-direction: column;
    align-items: center;
  }
}
```

### 2.2.1. å¤šæ¡ä»¶ç»„åˆæŠ€å·§
```css
/* å½“å±å¹•å®½åº¦åœ¨ 600px~900px ä¸”æ¨ªå±æ—¶ */
@media (min-width: 600px) and (max-width: 900px) and (orientation: landscape) {
  .image-container {
    width: 50%;
  }
}

/* å½“åˆ†è¾¨ç‡ â‰¥ 2dppxï¼ˆè§†ç½‘è†œå±ï¼‰æ—¶ */
@media (min-resolution: 2dppx) {
  img {
    srcset: "high-res.jpg 2x";
  }
}
```

### 2.2.2. å“åº”å¼æœ€ä½³å®è·µ
1. **è®¾ç½®è§†å£ï¼ˆviewportï¼‰**
   åœ¨ HTML å¤´éƒ¨æ·»åŠ ï¼š
   ```html
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   ```
   ç¡®ä¿é¡µé¢é€‚é…ç§»åŠ¨è®¾å¤‡ã€‚

2. **æ–­ç‚¹ç­–ç•¥**
   å¸¸è§æ–­ç‚¹ï¼š
   - æ‰‹æœºï¼š`max-width: 600px`
   - å¹³æ¿ï¼š`max-width: 900px`
   - æ¡Œé¢ï¼š`min-width: 1024px`

3. **é¿å…è¿‡åº¦åµŒå¥—**
   ä½¿ç”¨å¤šä¸ªç‹¬ç«‹çš„åª’ä½“æŸ¥è¯¢å—ï¼Œè€Œéå±‚å±‚åµŒå¥—ï¼š
   ```css
   /* æ¨èï¼šç‹¬ç«‹å— */
   @media (max-width: 768px) { ... }
   @media (max-width: 480px) { ... }

   /* é¿å…ï¼šåµŒå¥—å¯¼è‡´å¤æ‚åº¦â†‘ */
   @media (max-width: 768px) {
     @media (orientation: portrait) { ... }
   }
   ```

## 2.3. Flex å’Œ Grid ç›¸å…³å±æ€§å˜åŒ–æ˜¯å“åº”å¼å¼€å‘çš„å¸¸è§æ€è·¯

> é€šè¿‡åª’ä½“æŸ¥è¯¢åŠ¨æ€ä¿®æ”¹ Flex å’Œ Grid å±æ€§ï¼Œå¯å®ç°çµæ´»çš„å¸ƒå±€åˆ‡æ¢ã€‚

### 2.3.1. Flex å¸ƒå±€çš„å“åº”å¼è°ƒæ•´

#### ğŸŒŸ ç¤ºä¾‹ï¼šç§»åŠ¨ç«¯å‚ç›´å¯¼èˆªæ 
```css
/* é»˜è®¤ï¼šæ°´å¹³æ’åˆ— */
.nav {
  display: flex;
  flex-direction: row;
}

/* å½“å®½åº¦ â‰¤ 768px æ—¶ï¼Œæ”¹ä¸ºå‚ç›´æ’åˆ— */
@media (max-width: 768px) {
  .nav {
    flex-direction: column;
    align-items: center;
  }
}
```

#### ğŸŒŸ ç¤ºä¾‹ï¼šè‡ªé€‚åº”å›¾ç‰‡å°ºå¯¸
```css
.image-gallery {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
}

/* å½“å®½åº¦ â‰¤ 600px æ—¶ï¼Œæ¯è¡Œ1å¼  */
@media (max-width: 600px) {
  .image-gallery img {
    flex: 0 0 100%;
  }
}

/* å½“å®½åº¦ â‰¤ 900px æ—¶ï¼Œæ¯è¡Œ2å¼  */
@media (max-width: 900px) {
  .image-gallery img {
    flex: 0 0 50%;
  }
}
```

### 2.3.2. Grid å¸ƒå±€çš„å“åº”å¼è°ƒæ•´

#### ğŸŒŸ ç¤ºä¾‹ï¼šè‡ªé€‚åº”å•†å“åˆ—è¡¨
```css
.product-grid {
  display: grid;
  gap: 20px;
  padding: 20px;
}

/* é»˜è®¤ï¼š3åˆ— */
@media (min-width: 1024px) {
  .product-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* å¹³æ¿ï¼š2åˆ— */
@media (max-width: 1023px) and (min-width: 768px) {
  .product-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* æ‰‹æœºï¼š1åˆ— */
@media (max-width: 767px) {
  .product-grid {
    grid-template-columns: 1fr;
  }
}
```

#### ğŸŒŸ ç¤ºä¾‹ï¼šåŠ¨æ€ç½‘æ ¼é—´è·
```css
/* æ ¹æ®å±å¹•å®½åº¦è°ƒæ•´é—´è· */
@media (max-width: 600px) {
  .grid-container {
    gap: 10px; /* ç§»åŠ¨ç«¯å‡å°é—´è· */
  }
}
```

### 2.3.3. å“åº”å¼ä¼˜åŒ–æŠ€å·§
1. **ä¼˜å…ˆä½¿ç”¨ç›¸å¯¹å•ä½**
   å¦‚ `vw`ã€`%`ã€`fr`ï¼Œè€Œéå›ºå®šåƒç´ å€¼ã€‚
2. **éšè—å¤šä½™å†…å®¹**
   åœ¨å°å±å¹•ä¸‹éšè—æ¬¡è¦å…ƒç´ ï¼š
   ```css
   @media (max-width: 480px) {
     .sidebar {
       display: none;
     }
   }
   ```
3. **ç»“åˆè§†å£å•ä½**
   ```css
   .header {
     height: 10vh; /* é«˜åº¦éšè§†å£é«˜åº¦å˜åŒ– */
   }
   ```

## çŸ¥è¯†å›é¡¾
1. **åª’ä½“æŸ¥è¯¢æ ¸å¿ƒè¦ç´ **ï¼š
   - åª’ä½“ç±»å‹ï¼ˆ`screen`ã€`print`ï¼‰ã€åª’ä½“ç‰¹æ€§ï¼ˆ`min-width`ã€`orientation`ï¼‰ã€é€»è¾‘è¿ç®—ç¬¦ï¼ˆ`and`ï¼‰ã€‚
   - è§†å£è®¾ç½® `<meta name="viewport" ...>` æ˜¯å“åº”å¼å¸ƒå±€çš„åŸºç¡€ã€‚
2. **Flex å¸ƒå±€å“åº”å¼**ï¼š
   - é€šè¿‡ `flex-direction`ã€`flex-wrap`ã€`flex` å±æ€§è°ƒæ•´æ’åˆ—æ–¹å¼å’Œå æ¯”ã€‚
3. **Grid å¸ƒå±€å“åº”å¼**ï¼š
   - åŠ¨æ€ä¿®æ”¹ `grid-template-columns/rows`ã€`gap`ï¼Œæˆ–ä½¿ç”¨ `repeat()` å’Œ `minmax()`ã€‚
4. **æœ€ä½³å®è·µ**ï¼š
   - å®šä¹‰æ–­ç‚¹åˆ†å±‚ï¼ˆå¦‚æ‰‹æœºâ†’å¹³æ¿â†’æ¡Œé¢ï¼‰ã€‚
   - ä¼˜å…ˆä½¿ç”¨ `@media` åœ¨ç°æœ‰æ ·å¼è¡¨ä¸­æ·»åŠ è§„åˆ™ï¼Œå‡å°‘ HTTP è¯·æ±‚ã€‚

## è¯¾åç»ƒä¹ 
1. ï¼ˆå•é€‰ï¼‰ä»¥ä¸‹åª’ä½“æŸ¥è¯¢çš„æ¡ä»¶æè¿°æ­£ç¡®çš„æ˜¯ï¼Ÿ
   - A. `@media (max-width: 600px)`ï¼šå±å¹•å®½åº¦ â‰¥600px æ—¶ç”Ÿæ•ˆã€‚
   - B. `@media screen and (orientation: portrait)`ï¼šç«–å±æ—¶ç”Ÿæ•ˆã€‚
   - C. `@media not screen`ï¼šä»…åœ¨æ‰‹æœºä¸Šç”Ÿæ•ˆã€‚
   - D. `@media (min-resolution: 1dppx)`ï¼šä»…é€‚ç”¨äºä½åˆ†è¾¨ç‡å±å¹•ã€‚

2. ï¼ˆå¡«ç©ºï¼‰ä½¿ç”¨åª’ä½“æŸ¥è¯¢å°† `.header` çš„èƒŒæ™¯è‰²æ”¹ä¸ºçº¢è‰²ï¼Œå½“å±å¹•å®½åº¦ â‰¤ 768px ä¸”æ¨ªå±æ—¶ï¼š
   ```css
   @media (max-width: 768px) and (orientation: ______) {
     .header { background-color: ______; }
   }
   ```

3. ï¼ˆä»£ç é¢˜ï¼‰ä¿®å¤ä»¥ä¸‹ä»£ç ï¼Œä½¿ `.sidebar` åœ¨ â‰¤ 600px å®½åº¦æ—¶éšè—ï¼š
   ```css
   @media (max-width: 600px) {
     .sidebar { display: none; } /* æ­£ç¡® */
     .content { width: 100%; }
   }
   ```

4. ï¼ˆå®è·µé¢˜ï¼‰ä½¿ç”¨åª’ä½“æŸ¥è¯¢å’Œ Gridï¼Œå®ç°ä»¥ä¸‹å¸ƒå±€ï¼š
   - æ¡Œé¢ç«¯ï¼š3åˆ—ï¼Œåˆ—é—´è·20pxã€‚
   - ç§»åŠ¨ç«¯ï¼š1åˆ—ï¼ŒèƒŒæ™¯è‰²ä¸ºæµ…ç°è‰²ã€‚
