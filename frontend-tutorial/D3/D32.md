# D32. å“åº”å¼å·¥å…·åº“ VueUse

## 2.1. ğŸŒŸ VueUse å°†å¸¸è§åŠŸèƒ½å°è£…ä¸ºå“åº”å¼æ•°æ®

> VueUse æ˜¯ Vue çš„ã€Œç‘å£«å†›åˆ€ã€ï¼Œå®ƒæŠŠåŸæœ¬éœ€è¦æ‰‹åŠ¨å¤„ç†çš„å¤æ‚é€»è¾‘ï¼ˆå¦‚æµè§ˆå™¨äº¤äº’ã€ä¼ æ„Ÿå™¨æ•°æ®ã€çŠ¶æ€ç®¡ç†ï¼‰å°è£…æˆå¯å¤ç”¨çš„ç»„åˆå¼å‡½æ•°ï¼Œè®©æ•°æ®**è‡ªåŠ¨å“åº”å˜åŒ–**ã€‚

### æ ¸å¿ƒç‰¹æ€§
- **å“åº”å¼å°è£…**ï¼šå°†éå“åº”å¼APIï¼ˆå¦‚ `window.innerWidth`ï¼‰è½¬ä¸ºå“åº”å¼æ•°æ®
- **æŒ‰éœ€å¯¼å…¥**ï¼šä»…å¼•å…¥éœ€è¦çš„å‡½æ•°ï¼Œé¿å…å†—ä½™æ‰“åŒ…
- **è·¨ç‰ˆæœ¬å…¼å®¹**ï¼šåŒæ—¶æ”¯æŒ Vue 2 å’Œ Vue 3

```html
<script setup>
import { useWindowSize } from '@vueuse/core'
const { width, height } = useWindowSize() // è‡ªåŠ¨å“åº”çª—å£å°ºå¯¸å˜åŒ–
</script>
```

:::tip
å®‰è£…å‘½ä»¤ï¼š`npm install @vueuse/core`
:::

## 2.2. ğŸŒŸ VueUse ç”¨ä¾‹ä»‹ç»

### 2.2.1. ğŸ” è·å– BOM ç›¸å…³æ•°æ®

#### ç”¨ä¾‹ï¼šå®æ—¶è·å–çª—å£å°ºå¯¸
```html
<template>
  <div>
    <p>çª—å£å®½åº¦ï¼š{{ width }}px</p>
    <p>çª—å£é«˜åº¦ï¼š{{ height }}px</p>
  </div>
</template>

<script setup>
import { useWindowSize } from '@vueuse/core'

const { width, height } = useWindowSize()
</script>
```

#### ç”¨ä¾‹ï¼šç›‘å¬é¡µé¢å¯è§æ€§
```html
<template>
  <div>
    <p>é¡µé¢çŠ¶æ€ï¼š{{ visibility }}</p>
  </div>
</template>

<script setup>
import { useDocumentVisibility } from '@vueuse/core'

const visibility = useDocumentVisibility() // è¿”å› 'visible'/'hidden'
</script>
```

### 2.2.2. ğŸ¤– è·å–äº¤äº’çŠ¶æ€

#### ç”¨ä¾‹ï¼šè¿½è¸ªé¼ æ ‡ä½ç½®
```html
<template>
  <div>
    <p>é¼ æ ‡Xåæ ‡ï¼š{{ x }}</p>
    <p>é¼ æ ‡Yåæ ‡ï¼š{{ y }}</p>
  </div>
</template>

<script setup>
import { useMouse } from '@vueuse/core'

const { x, y } = useMouse() // è‡ªåŠ¨æ›´æ–°åæ ‡
</script>
```

#### ç”¨ä¾‹ï¼šé˜²æŠ–èŠ‚æµæ“ä½œ
```javascript
import { useThrottleFn } from '@vueuse/core'

const expensiveOperation = useThrottleFn(() => {
  console.log('æ¯éš”500msæ‰§è¡Œä¸€æ¬¡')
}, 500)
```

### 2.2.3. ğŸ—„ï¸ é›†æˆ localStorage å­˜å‚¨æ•°æ®

#### ç”¨ä¾‹ï¼šæŒä¹…åŒ–è¡¨å•æ•°æ®
```html
<template>
  <input v-model="storedValue" placeholder="è¾“å…¥å†…å®¹" />
</template>

<script setup>
import { useStorage } from '@vueuse/core'

const storedValue = useStorage('my-key', 'é»˜è®¤å€¼') // è‡ªåŠ¨åŒæ­¥localStorage
</script>
```

#### ç”¨ä¾‹ï¼šå¸¦è¿‡æœŸæ—¶é—´çš„ç¼“å­˜
```javascript
import { useLocalStorage } from '@vueuse/core'

const cachedData = useLocalStorage(
  'cache-key',
  'åˆå§‹å€¼',
  {
    expires: 60 * 60 * 24 // 1å¤©åè¿‡æœŸ
  }
)
```

:::warning
ç›´æ¥æ“ä½œ `localStorage` éœ€è¦æ‰‹åŠ¨å¤„ç†ç±»å‹è½¬æ¢ï¼ŒVueUse è‡ªåŠ¨å¤„ç†ä¸ºå“åº”å¼æ•°æ®ï¼
:::

## çŸ¥è¯†å›é¡¾

1. **VueUse æ ¸å¿ƒæ€æƒ³**ï¼šç”¨ç»„åˆå¼å‡½æ•°å°è£…é«˜é¢‘åŠŸèƒ½ï¼Œå®ç°ã€Œä¸€è¡Œä»£ç è§£å†³å¤æ‚é€»è¾‘ã€
2. **å…³é”®å‡½æ•°åˆ†ç±»**ï¼š
   - **BOM ç›‘æ§**ï¼š`useWindowSize`ã€`useDocumentVisibility`
   - **äº¤äº’çŠ¶æ€**ï¼š`useMouse`ã€`useClickAway`
   - **æ•°æ®æŒä¹…åŒ–**ï¼š`useStorage`ã€`useSessionStorage`
3. **å“åº”å¼ä¼˜åŠ¿**ï¼šæ— éœ€æ‰‹åŠ¨è§¦å‘æ›´æ–°ï¼Œæ•°æ®å˜åŒ–è‡ªåŠ¨é©±åŠ¨è§†å›¾åˆ·æ–°

## è¯¾åç»ƒä¹ 

1. **å•é€‰**ï¼šä»¥ä¸‹å“ªä¸ªå‡½æ•°ç”¨äºç›‘å¬çª—å£å°ºå¯¸å˜åŒ–ï¼Ÿ
   - A. `useMouse`
   - B. `useWindowSize`
   - C. `useStorage`
   - D. `useDocumentVisibility`

2. **å¡«ç©º**ï¼šä½¿ç”¨ `useThrottleFn` å‡½æ•°æ—¶ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤º______ã€‚

3. **ç®€ç­”**ï¼šä¸ºä»€ä¹ˆ VueUse çš„ `useStorage` å‡½æ•°æ¯”ç›´æ¥æ“ä½œ `localStorage` æ›´æ–¹ä¾¿ï¼Ÿ

:::details å‚è€ƒç­”æ¡ˆ
1. B
2. èŠ‚æµæ—¶é—´é—´éš”ï¼ˆå•ä½æ¯«ç§’ï¼‰
3. è‡ªåŠ¨å¤„ç†æ•°æ®ç±»å‹è½¬æ¢ã€å“åº”å¼æ›´æ–°ï¼Œä¸”æ”¯æŒè¿‡æœŸæ—¶é—´ç­‰é«˜çº§é…ç½®ã€‚
:::

## æ‰©å±•é˜…è¯»

- [VueUse å®˜æ–¹æ–‡æ¡£](https://vueuse.org/)
- [ç”¨ä¾‹å®æˆ˜ï¼šæ‹–æ‹½ç»„ä»¶](https://vueuse.org/guide/#usedraggable)
- [å“åº”å¼ç›‘å¬å…ƒç´ å¯è§æ€§](https://vueuse.org/guide/#useintersectionobserver)
